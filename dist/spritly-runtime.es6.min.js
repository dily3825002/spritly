module.exports=function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/dist/",o(o.s=13)}({13:function(e,t,o){"use strict";o.r(t);const n=new Map;var r={DEFAULT_RECEIVER:{id:Symbol("default_receiver")},on(e,t){const o=n.get(e)||[];o.push(t),n.set(e,o)},un(e,t){const o=n.get(e);if(o){const e=o.indexOf(t);e>=0&&o.splice(e,1)}},send(e,t,o={}){(n.get(e)||[]).forEach(e=>{e(t,o)})},get signals(){return[...n.keys()]}};const l=new Set,a={},s=Symbol("_tapHandlers");var u={add(e){if(l.has(e))return e;l.add(e),e.id&&(a[e.id]=e);let t=null;const o=e=>{t=Date.now()},n=o=>{Date.now()-t>=1e3?e.dispatchEvent("longtap",o,!0,!0):e.dispatchEvent("tap",o,!0,!0)};return e.on("touchstart",o),e.on("touchend",n),e[s]=[o,n],r.send("ELEMENT_CREATED",e),e},remove(e){if(e.layer&&e.remove(),e[s]){const[t,o]=e[s];e.off("touchstart",t),e.off("touchend",o),delete e[s]}r.send("ELEMENT_DESTROYED",e),e.id&&delete a[e.id],e.$$deleted=!0,l.delete(e)},all:()=>[...l],getElementById:e=>a[e]||null,getElementsByName:e=>[...l].filter(t=>t.name===e)};function i(e){const t=e.layer;return t?t.children.filter(t=>t!==e&&t.OBBCollision(e)):[]}var d=function(...e){const t={};return e.forEach(e=>{t[e]=Symbol(e)}),t}("target","offsetX","offsetY","layerX","layerY","altKey","ctrlKey","shiftKey","buttons","key","keyCode","property","oldValue","newValue");function c(e,t,o){const n=o.originalEvent||o,{altKey:l,buttons:a,ctrlKey:s,shiftKey:u,key:i,keyCode:c}=n,f={[d.target]:n.target,[d.altKey]:l,[d.ctrlKey]:s,[d.shiftKey]:u};null!=i&&Object.assign(f,{[d.key]:i,[d.keyCode]:c}),null!=a&&Object.assign(f,{[d.buttons]:a}),o.originalEvent&&null!=n.offsetX&&Object.assign(f,{[d.offsetX]:n.offsetX,[d.offsetY]:n.offsetY,[d.layerX]:n.layerX,[d.layerY]:n.layerY}),r.send(e,t,f)}function f(e,t,o=0){const n=`${t}X`,r=`${t}Y`;(n in e||r in e)&&(e[t]=[null!=e[n]?e[n]:o,null!=e[r]?e[r]:o],delete e[n],delete e[r])}const y=Symbol("frameTimer"),m=Symbol("cursor"),g=Symbol("dragHandlers"),p=Symbol("originalZIndex");const h=new Map;var b={set(e,t,o=null){const n=h.get(e);h.set(e,t),r.send("STORE_PROPERTY_UPDATE",o,{[d.property]:e,[d.oldValue]:n,[d.newValue]:t})},get:e=>h.get(e),delete(e,t=null){const o=h.get(e);h.delete(e),r.send("STORE_PROPERTY_UPDATE",t,{[d.property]:e,[d.oldValue]:o})}};const E=new Map,v=new Audio;var w={canplay:e=>v.canPlayType(e),load(e){"string"==typeof e&&(e={id:e,src:e});let t=E.get(e.id);if(t)return t;const o=new Audio(e.src);return t=new Promise(e=>{o.oncanplaythrough=(()=>{e(o)})}),E.set(e.id,t),t},play(e){this.load(e).then(e=>e.play())}};o.d(t,"runtime",function(){return S});const S={Signal:r,Symbols:d,use:function({Scene:e},t={container:"#stage",viewport:"auto",resolution:"flex"}){const{container:o,viewport:n,resolution:l}=t,a=new e(o,{viewport:n,resolution:l});return a.layer("bglayer",{handleEvent:!1}),a.layer("fglayer").on("click",e=>{c("LAYER_CLICKED",a,e)}),document.addEventListener("keydown",e=>{r.send("KEYDOWN",document,e)}),document.addEventListener("keyup",e=>{r.send("KEYUP",document,e)}),this.scene=a,a},dispatchEvent:c,parse_attr:function(e,...t){const o=t.reduce((e,t)=>Object.assign(e,t),{});if("texture"in o&&(o.textures=[o.texture],delete o.texture),"fontFamily"in o&&(o.fontFamily=`"${o.fontFamily}"`),f(o,"anchor",0),f(o,"scale",1),f(o,"translate",0),f(o,"skew",0),function(e){if("borderWidth"in e||"borderStyle"in e||"borderColor"in e){const{borderWidth:t,borderStyle:o,borderColor:n}=e;e.border={width:null!=t?t:1,style:null!=o?o:"solid",color:null!=n?n:"#000000"},delete e.borderWidth,delete e.borderStyle,delete e.borderColor}}(o),"draggable"in o){const t=e[g];if("no"===o.draggable&&t){const[o,n,r]=t;e.off(["mousedown","touchstart"],o),e.off(["mouseup","touchend"],r),e.off(["mousemove","touchmove"],n),delete e[g]}else if("yes"===o.draggable&&!t){let t=0,o=0;const n=n=>{const{layerX:r,layerY:l}=n;e.attr({x:r-t,y:l-o})},r=r=>{t=r.offsetX,o=r.offsetY,e[p]=e.attr("zIndex"),e.setMouseCapture(),e.attr({shadow:{color:"#333",blur:5,offset:[10,10]},zIndex:1/0}),e.on(["mousemove","touchmove"],n)},l=t=>{e.releaseMouseCapture(),e.attr({shadow:null,zIndex:e[p]}),e.off(["mousemove","touchmove"],n),e.dispatchEvent("dragged",t,!0,!0),i(e).forEach(e=>{e.dispatchEvent("draggedonto",t,!0,!0)})};e[g]=[r,l,n],e.on(["mousedown","touchstart"],r),e.on(["mouseup","touchend"],l)}"cursor"in o||(o.cursor="yes"===o.draggable?"move":"default")}"cursor"in o&&null==e[m]&&(e[m]="auto",e.on("mouseenter",t=>{e[m]=t.originalEvent.target.style.cursor;const o=e.attr("cursor");t.originalEvent.target.style.cursor=o}),e.on("mouseleave",t=>{t.originalEvent.target.style.cursor=e[m]}));const n=Object.entries(o).filter(([e,t])=>0===e.indexOf("textureFrame$")&&(delete o[e],!0)).map(e=>e[1]),r=n.length;if(r>0&&!e.$$deleted){let t=0;const o=e[y];o&&clearTimeout(o),e.attr({textures:n[t][0]}),e[y]=setTimeout(function o(){e.attr({textures:n[t][0]}),e.$$deleted||(e[y]=setTimeout(o,1e3*n[t][1])),t=(t+1)%r},1e3*n[t][1]),t=(t+1)%r}return o},get_attr:function(e,t){if("sprite"===e.nodeType||"path"===e.nodeType||"label"===e.nodeType)return/^.*[XY]$/.test(t)?function(e,t){const o=t.slice(-1),n=e.attr(t.slice(0,-1));return"X"===o?n[0]:n[1]}(e,t):"borderWidth"===t?e.attr("border").width:"bordeStyle"===t?e.attr("border").style:"borderColor"===t?e.attr("border").color:e.attr(t)},wait:function(e){return new Promise(t=>{setTimeout(t,e)})},random:function(e,t){return e<t&&([e,t]=[t,e]),Math.floor(Math.random()*(t-e))+e},random_color:function(){return`rgb(${Math.floor(255*Math.random())},${Math.floor(255*Math.random())},${Math.floor(255*Math.random())})`},random_color_hue:function(e,t,o){return`hsla(${Math.floor(360*Math.random())},${e}%,${t}%,${o})`},getCollisions:i,ElementList:u,Store:b,Audio:w}}});