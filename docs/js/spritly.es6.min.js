module.exports=function(t){var e={};function _(T){if(e[T])return e[T].exports;var i=e[T]={i:T,l:!1,exports:{}};return t[T].call(i.exports,i,i.exports,_),i.l=!0,i.exports}return _.m=t,_.c=e,_.d=function(t,e,T){_.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:T})},_.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},_.t=function(t,e){if(1&e&&(t=_(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var T=Object.create(null);if(_.r(T),Object.defineProperty(T,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)_.d(T,i,function(e){return t[e]}.bind(null,i));return T},_.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return _.d(e,"a",e),e},_.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},_.p="/js/",_(_.s=13)}([function(t,e){t.exports=require("Blockly")},function(t,e,_){const T=_(0),{Msg:i}=T;i.SPRITE_HUE=330,i.ATTRS_HUE=130,i.ATTRS_SPRITE_HUE=140,i.ATTRS_LABEL_HUE=150,i.ATTRS_PATH_HUE=160,i.EASING_HUE=90,i.ANIMATE_HUE=345,i.SIGNALS_HUE=55,i.LITERAL_HUE=250,i.GETTER_SETTER_HUE=120,i.STORE_HUE=70,i.FLOWS_HUE=220,i.MATH_HUE=270,i.LOG_HUE=310,i.SOUND_HUE=45},function(t,e,_){const T=_(0),{Msg:i}=T;i.COMMON_FGLAYER="前景图层",i.COMMON_BGLAYER="背景图层",i.COMMON_TARGET="目标元素",i.COMMON_SENDER="发送者",i.COMMON_RECEIVER="接收者",i.COMMON_SPRITE="精灵元素",i.COMMON_LABEL="文本元素",i.COMMON_PATH="矢量元素",i.CATEGORY_SIGNALS="信号",i.CATEGORY_SPRITES="元素对象",i.CATEGORY_ATTRIBUTES="元素属性",i.CATEGORY_ATTRIBUTES_COMMON="公共属性",i.CATEGORY_ATTRIBUTES_SPRITE="精灵属性",i.CATEGORY_ATTRIBUTES_LABEL="文本属性",i.CATEGORY_ATTRIBUTES_PATH="矢量属性",i.CATEGORY_ANIM_ASYNC="动画和异步",i.CATEGORY_GETTER_SETTER="属性读写",i.CATEGORY_STORE="共享数据",i.CATEGORY_LITERALS="字面量",i.CATEGORY_LISTS="列表对象",i.CATEGORY_MATH="数学计算",i.CATEGORY_LOGIC="逻辑判断",i.CATEGORY_FLOWS="循环和条件",i.CATEGORY_LOG="日志输出",i.CATEGORY_SOUND="音效",i.SENDER_RECEIVER_TARGET_TOOLTIP="发送者：发送信号的元素。\n接收者：接收信号的元素。\n目标元素：如果信号由事件触发，目标元素是实际事件目标。",i.FGLAYER_BGLAYER_TOOTIP="前景图层接收DOM事件，\n背景图层不接收DOM事件。",i.LITERAL_NULL="空",i.LITERAL_UNDEFINED="未定义",i.NIL_TOOLTIP="%1值。",i.OBJECT_CREATE_TOOLTIP="构造一个对象。",i.LOOP_GET_INDEX_MSG0="索引值",i.LOOP_GET_INDEX_TOOLTIP="循环中的索引值。",i.ATTR_ID="ID",i.ATTR_NAME="名字",i.ATTR_ANCHORX="X向锚",i.ATTR_ANCHORY="Y向锚",i.ATTR_X="X坐标",i.ATTR_Y="Y坐标",i.ATTR_WIDTH="宽",i.ATTR_HEIGHT="高",i.ATTR_BGCOLOR="背景色",i.ATTR_OPACITY="透明度",i.ATTR_SCALEX="X向拉伸",i.ATTR_SCALEY="Y向拉伸",i.ATTR_TRANSLATEX="X向平移",i.ATTR_TRANSLATEY="Y向平移",i.ATTR_SKEWX="X向扭曲",i.ATTR_SKEWY="Y向扭曲",i.ATTR_ROTATE="逆时针旋转",i.ATTR_BORDERRADIUS="圆角半径",i.ATTR_BORDERWIDTH="边框线宽",i.ATTR_BORDERSTYLE="边框样式",i.ATTR_BORDERCOLOR="边框颜色",i.ATTR_DASHOFFSET="虚线框偏移",i.ATTR_TEXTURE="图片纹理",i.ATTR_TEXT="文本",i.ATTR_FONTSIZE="字号",i.ATTR_FONTFAMILY="字体",i.ATTR_FONTSTYLE="字体样式",i.ATTR_FONTVARIANT="字体变体",i.ATTR_FONTWEIGHT="字体粗细",i.ATTR_TEXTALIGN="文本对齐",i.ATTR_LINEHEIGHT="文本行高",i.ATTR_D="SVG路径",i.ATTR_LINEWIDTH="路径线宽",i.ATTR_LINEDASH="路径虚线样式",i.ATTR_LINEDASHOFFSET="路径虚线偏移",i.ATTR_LINECAP="线帽样式",i.ATTR_LINEJOIN="连线样式",i.ATTR_BOUNDING="碰撞边界",i.ATTR_STROKECOLOR="描线颜色",i.ATTR_FILLCOLOR="填充颜色",i.ATTR_CURSOR="鼠标样式",i.ATTR_DRAGGABLE="可拖拽？",i.ATTR_VALUE_YES="是",i.ATTR_VALUE_NO="否",i.ATTR_VALUE_SOLID="实线",i.ATTR_VALUE_DASHED="虚线",i.ATTR_VALUE_NORMAL="常规",i.ATTR_VALUE_BOLD="粗体",i.ATTR_VALUE_LIGHTER="细体",i.ATTR_VALUE_ITALIC="斜体",i.ATTR_VALUE_OBLIQUE="倾斜",i["ATTR_VALUE_SMALL-CAPS"]="小型大写",i.ATTR_VALUE_LEFT="靠左",i.ATTR_VALUE_RIGHT="靠右",i.ATTR_VALUE_CENTER="居中",i.ATTR_VALUE_BUTT="平直",i.ATTR_VALUE_ROUND="圆形",i.ATTR_VALUE_SQUARE="方形",i.ATTR_VALUE_MITER="尖角",i.ATTR_VALUE_BEVEL="斜角",i.ATTR_VALUE_BOX="基于盒子",i.ATTR_VALUE_PATH="基于路径",i.ATTR_VALUE_DEFAULT="默认",i.ATTR_VALUE_CROSSHAIR="十字线",i.ATTR_VALUE_POINTER="手形",i.ATTR_VALUE_MOVE="可被移动",i["ATTR_VALUE_E-RESIZE"]="可右移",i["ATTR_VALUE_NE-RESIZE"]="可右上移",i["ATTR_VALUE_SE-RESIZE"]="可右下移",i["ATTR_VALUE_W-RESIZE"]="可左移",i["ATTR_VALUE_NW-RESIZE"]="可左上移",i["ATTR_VALUE_SW-RESIZE"]="可左下移",i["ATTR_VALUE_N-RESIZE"]="可上移",i["ATTR_VALUE_S-RESIZE"]="可下移",i.ATTR_VALUE_TEXT="文本",i.ATTR_VALUE_WAIT="等待",i.ATTR_VALUE_HELP="帮助",i.AWAIT_MSG0="等待 %1 毫秒 🕙",i.AWAIT_TOOLTIP="等待 %1 毫秒后继续执行后续操作。",i.AWAIT_FRAME_MSG0="等待 %1 更新到下一帧 ⌛",i.AWAIT_FRAME_TOOLTIP="等待图层更新后继续执行后续操作。",i.SPRITE_ANIMATE_MSG0="%1 %2 动画持续 %3 秒",i.SPRITE_ANIMATE_MSG1="起始状态 %1",i.SPRITE_ANIMATE_MSG2="结束状态 %1",i.SPRITE_ANIMATE_MSG3="缓动策略 %1",i.SPRITE_ANIMATE_TOOLTIP="在指定元素上执行动画操作。",i.SPRITE_ANIMATE_OPTION_ASYNC_DEFAULT="⚡️ 立即执行",i.SPRITE_ANIMATE_OPTION_ASYNC_AWAIT="⌛️ 执行并等待",i.EASING_MSG0="%1",i.EASING_OPTION_EASING_EASE="匀速",i.EASING_OPTION_EASING_EASEIN="匀加速",i.EASING_OPTION_EASING_EASEOUT="匀减速",i.EASING_OPTION_EASING_EASEINOUT="先加速后减速",i.EASING_OPTION_TOOLTIP="为动画设置缓动策略。",i.BEZIER_EASING_MSG0="贝塞尔曲线 %1 %2 %3 %4",i.BEZIER_EASING_TOOLTIP="将动画缓动策略设置为贝塞尔曲线。",i.FIELD_ATTR_INC_MSG0="%1 %2",i.FIELD_ATTR_INC_TOOLTIP="在原值基础上改变属性值。",i.KEYVALUE_MSG0="%1: %2,",i.KEYVALUE_TOOLTIP="设置“属性-值”对。",i.FIELD_ATTR_ANCHOR_TOOLTIP="设置元素的%1。",i.FIELD_ATTR_XY_TOOLTIP="设置元素的%1。",i.FIELD_ATTR_SIZE_TOOLTIP="设置元素的%1。",i.FIELD_ATTR_BGCOLOR_TOOLTIP="设置元素的背景色。",i.FIELD_ATTR_OPACITY_TOOLTIP="设置元素的透明度。",i.FIELD_ATTR_ROTATE_TOOLTIP="设置元素的逆时针旋转角度。",i.FIELD_ATTR_SCALE_TOOLTIP="设置元素的%1。",i.FIELD_ATTR_TRANSLATE_TOOLTIP="设置元素的%1。",i.FIELD_ATTR_SKEW_TOOLTIP="设置元素的%1。",i.FIELD_ATTR_BORDERRADIUS_TOOLTIP="设置元素的圆角半径。",i.FIELD_ATTR_BORDERWIDTH_TOOLTIP="设置元素的边框宽度。",i.FIELD_ATTR_BORDERSTYLE_TOOLTIP="设置元素的边框样式。",i.FIELD_ATTR_BORDERCOLOR_TOOLTIP="设置元素的边框颜色。",i.FIELD_ATTR_DASHOFFSET_TOOLTIP="如果元素边框样式为虚线，设置边框虚线的偏移量。",i.FIELD_ATTR_TEXTURE_TOOLTIP="设置精灵元素的图片纹理。",i.FIELD_ATTR_TEXT_TOOLTIP="设置文本元素的内容。",i.FIELD_ATTR_FONTSIZE_TOOLTIP="设置文本元素的字号。",i.FIELD_ATTR_FONTFAMILY_TOOLTIP="设置文本元素的字体。",i.FIELD_ATTR_FONTSTYLE_TOOLTIP="设置文本元素的字体样式。",i.FIELD_ATTR_FONTVARIANT_TOOLTIP="设置文本元素的字体变体。",i.FIELD_ATTR_FONTWEIGHT_TOOLTIP="设置文本元素的字体粗细。",i.FIELD_ATTR_TEXTALIGN_TOOLTIP="设置文本元素的文字对齐方式。",i.FIELD_ATTR_LINEHEIGHT_TOOLTIP="设置文本元素的行高。",i.FIELD_ATTR_D_TOOLTIP="设置矢量元素的SVG路径。",i.FIELD_ATTR_LINEWIDTH_TOOLTIP="设置矢量元素的线宽。",i.FIELD_ATTR_LINEDASH_TOOLTIP="将矢量元素的描线设为虚线。",i.FIELD_ATTR_LINEDASHOFFSET_TOOLTIP="如果矢量元素的描线是虚线，设置虚线偏移量。",i.FIELD_ATTR_LINECAP_TOOLTIP="设置矢量元素的线帽样式。",i.FIELD_ATTR_LINEJOIN_TOOLTIP="设置矢量元素的连线样式。",i.FIELD_ATTR_BOUNDING_TOOLTIP="使用%1的边界方式来检测碰撞。",i.FIELD_ATTR_STROKECOLOR_TOOLTIP="设置一个矢量元素或文本元素的描线颜色。",i.FIELD_ATTR_FILLCOLOR_TOOLTIP="设置一个矢量元素或文本元素的填充颜色。",i.FIELD_ATTR_CURSOR_TOOLTIP="设置光标形状。",i.FIELD_ATTR_DRAGGABLE_TOOLTIP="可拖拽？",i.RANDOM_STRING_MSG0="🎲 随机字符串",i.RANDOM_STRING_TOOLTIP="获得一个11个字符长度的随机字符串。",i.RANDOM_COLOUR_RGB_MSG0="🎲 随机颜色",i.RANDOM_COLOUR_RGB_TOOLTIP="获得一个随机的RGB颜色。",i.RANDOM_COLOUR_HUE_MSG0="🎲 随机色调",i.RANDOM_COLOUR_HUE_MSG1="饱和 %1% 亮 %2% 透明 %3.",i.RANDOM_COLOUR_HUE_TOOLTIP="获得一个随机的HSLA颜色。",i.LOG_OPTION_LOG_LOG="记录",i.LOG_OPTION_LOG_WARN="警告",i.LOG_OPTION_LOG_ERROR="错误",i.LOG_TOOLTIP="输出信息到控制台。",i.LOG_ALERT_MSG0="🔔 弹出 %1",i.LOG_ALERT_TOOLTIP="弹出一个会话框。",i.SIGNAL_DO_MSG0="当收到信号为 %1 🚩 执行",i.SIGNAL_DO_TOOLTIP="当收到指定信号时，执行动作。",i.SIGNAL_DO_OPTION_SIGNAL_START="开始运行",i.SIGNAL_DO_OPTION_SIGNAL_STORE_PROPERTY_UPDATE="共享数据内容更新",i.SIGNAL_DO_OPTION_SIGNAL_LAYER_CLICKED="前景图层被鼠标点击",i.SIGNAL_DO_OPTION_SIGNAL_KEYDOWN="键盘按键按下",i.SIGNAL_DO_OPTION_SIGNAL_KEYUP="键盘按键松开",i.SIGNAL_DO_OPTION_SIGNAL_ELEMENT_CREATED="元素被创建",i.SIGNAL_DO_OPTION_SIGNAL_ELEMENT_DESTROYED="元素被销毁",i.SIGNAL_NEW_SPRITE_AS_RECEIVER_MSG0="收到信号为 %1 🚩 时",i.SIGNAL_NEW_SPRITE_AS_RECEIVER_MSG1="创建 %1 作为接收者",i.SIGNAL_NEW_SPRITE_AS_RECEIVER_MSG2="ID设为 %1",i.SIGNAL_NEW_SPRITE_AS_RECEIVER_TOOLTIP="收到某个信号时，新建一个元素作为接收者并执行动作。",i.SIGNAL_WHEN_RECEIVER_IS_MSG0="收到信号 %1 🚩",i.SIGNAL_WHEN_RECEIVER_IS_MSG1="当接收者为 %1 时",i.SIGNAL_NEW_SPRITE_AS_RECEIVER_TOOLTIP="收到某个信号且接收者为特定元素时，执行动作。",i.GET_DATA_MSG0="消息",i.GET_DATA_TOOLTIP="读取信号消息。",i.GET_DATA_PROP_MSG0="消息的 %1",i.GET_DATA_PROP_TOOLTIP="读取信号的数据属性。如果信号是由事件触发，可读取这些属性。",i.GET_DATA_PROP_TOOLTIP2="读取信号的数据属性。如果信号是存储数据改变，可读取这些属性。",i.GET_DATA_PROP_OPTION_PROP_OFFSETX="相对坐标X",i.GET_DATA_PROP_OPTION_PROP_OFFSETY="相对坐标Y",i.GET_DATA_PROP_OPTION_PROP_LAYERX="绝对坐标X",i.GET_DATA_PROP_OPTION_PROP_LAYERY="绝对坐标Y",i.GET_DATA_PROP_OPTION_PROP_ALTKEY="按下ALT键",i.GET_DATA_PROP_OPTION_PROP_CTRLKEY="按下CTRL键",i.GET_DATA_PROP_OPTION_PROP_SHIFTKEY="按下SHIFT键",i.GET_DATA_PROP_OPTION_PROP_BUTTONS="鼠标按键值",i.GET_DATA_PROP_OPTION_PROP_KEY="键盘按键值",i.GET_DATA_PROP_OPTION_PROP_KEYCODE="键盘按键值编码",i.GET_DATA_PROP_OPTION_PROP_PROPERTY="更新的存储属性",i.GET_DATA_PROP_OPTION_PROP_OLDVALUE="属性原值",i.GET_DATA_PROP_OPTION_PROP_NEWVALUE="属性新值",i.EVENT_IMMEDIATELY="立即",i.EVENT_ONCLICK="被单击",i.EVENT_ONDBLCLICK="被双击",i.EVENT_ONMOUSEDOWN="按下鼠标按键",i.EVENT_ONMOUSEMOVE="鼠标在它内部移动",i.EVENT_ONMOUSEUP="释放鼠标按键",i.EVENT_ONMOUSEENTER="鼠标进入它",i.EVENT_ONMOUSELEAVE="鼠标离开它",i.EVENT_ONDRAGGED="被拖拽",i.EVENT_ONDRAGGEDONTO="其它元素拖拽入",i.EVENT_ONCOLLISION="与其他元素碰撞",i.SIGNAL_ONEVENT_SEND_MSG0="%1 %2 发送 %3 🚩",i.SIGNAL_ONEVENT_SEND_MSG1="包含消息 %1",i.SIGNAL_ONEVENT_SEND_TOOLTIP="当事件发生时，发送信号。",i.SPRITE_MSG0_TOOLTIP=`指定元素。\n${i.SENDER_RECEIVER_TARGET_TOOLTIP}`,i.SPRITE_APPEND_TO_MSG0="将 %1 添加到 %2",i.SPRITE_APPEND_TO_TOOLTIP="添加元素到层。",i.SPRITE_ATTRS_MSG0="设置 %1 属性",i.SPRITE_ATTRS_TOOLTIP="设置属性值到元素。",i.SPRITE_CREATE_ATTRS_MSG0="创建 %1",i.SPRITE_CREATE_ATTRS_MSG1="命名为 %1 包含属性",i.SPRITE_CREATE_ATTRS_TOOLTIP="创建一个指定名字的元素。可以使用循环语句创建多个同名元素。",i.SPRITE_EACH_ELEMENTS_NAMED_MSG0="所有名为 %1 的元素",i.SPRITE_EACH_ELEMENTS_NAMED_TOOLTIP="获得指定名字的全部元素。",i.SPRITE_DESTROY_MSG0="💣 销毁 %1",i.SPRITE_DESTROY_TOOLTIP="将元素移除层并销毁。",i.SPRITE_GET_ATTR_MSG0="%1 的 %2",i.SPRITE_GET_ATTR_TOOLTIP="读取目标元素的属性值。",i.MATH_RANDOM_INT_TITLE=`🎲 ${i.MATH_RANDOM_INT_TITLE}`,i.MATH_RANDOM_FLOAT_TITLE_RANDOM=`🎲 ${i.MATH_RANDOM_FLOAT_TITLE_RANDOM}`,i.LIST_FOREACH_MSG0="遍历列表 %1:",i.LIST_FOREACH_MSG1="执行 %1",i.LIST_FOREACH_MSG2="%1 代表每个元素, %2 代表索引",i.LIST_FOREACH_TOOLTIP="遍历列表每个元素，执行动作。",i.LIST_INDEX_TOOLTIP="获取迭代索引。",i.LIST_ITEM_TOOLTIP="获取迭代元素。",i.OBJECT_GET_PROP_MSG0="%1.%2",i.OBJECT_GET_PROP_TOOLTIP="读取对象属性。",i.LISTS_CREATE_RANGE_MSG0="创建列表范围",i.LISTS_CREATE_RANGE_MSG1="从 %1 到 %2",i.LISTS_CREATE_RANGE_TOOLTIP="通过整数范围创建列表。",i.STORE_SET_MSG0="📝 设置 %1 的值为 %2",i.STORE_SET_TOOLTIP="设置共享数据的值。",i.STORE_GET_MSG0="📝 获取 %1 的值",i.STORE_GET_TOOLTIP="获取共享数据的值。",i.STORE_DELETE_MSG0="✂️ 删除 %1 的值",i.STORE_DELETE_TOOLTIP="删除共享数据的值。",i.FIELD_ATTR_TEXTUREFRAME_MSG0="动画帧 %1",i.FIELD_ATTR_TEXTUREFRAME_MSG1="持续时间 %1秒",i.FIELD_ATTR_TEXTUREFRAME_TOOLTIP="在元素上设置动画帧，动画帧会自动循环播放。",i.SOUND_PLAY_MSG0="🔔 %1",i.SOUND_PLAY_TOOLTIP="播放声音。"},function(t,e,_){const T=_(0),i=T.Msg;function n(t="key",e="",_=T.Msg.ATTRS_HUE,n="KeyValue"){const o={name:"KEY",type:"field_dropdown"},E={type:"input_value",name:"VALUE",check:e};return"string"==typeof t&&(t=[t]),Array.isArray(t)?o.options=t.map(t=>[i.$(t,"ATTR"),t]):"string"!=typeof t&&t.prop&&t.options&&(o.options=[[i.$(t.prop,"ATTR"),t.prop]],E.type="field_dropdown",E.options=t.options.map(t=>[i.$(t,"ATTR_VALUE"),t])),{message0:i.KEYVALUE_MSG0,args0:[o,E],colour:_,previousStatement:n,nextStatement:n}}function o(t){return`\n'${t.getFieldValue("KEY")}': ${T.JavaScript.valueToCode(t,"VALUE",T.JavaScript.ORDER_NONE)||`'${t.getFieldValue("VALUE")}'`||"null"},`}T.Blocks.field_attr_inc={init(){this.jsonInit({message0:i.FIELD_ATTR_INC_MSG0,args0:[{type:"field_dropdown",name:"OP",options:[["+","+"],["-","-"],["*","*"],["/","/"],["^","**"]]},{type:"input_value",name:"VALUE",check:"Number"}],colour:T.Msg.ATTRS_HUE,tooltip:i.FIELD_ATTR_INC_TOOLTIP}),this.setOutput(!0,"Number")}},T.JavaScript.field_attr_inc=function(t){return[`v => v ${t.getFieldValue("OP")} ${T.JavaScript.valueToCode(t,"VALUE",T.JavaScript.ORDER_NONE)||0}`,T.JavaScript.ORDER_NONE]},T.Blocks.field_attr_anchor={init(){this.jsonInit(n(["anchorX","anchorY"],"Number")),this.setTooltip(()=>i.FIELD_ATTR_ANCHOR_TOOLTIP.replace("%1",i.$(this.getFieldValue("KEY"),"ATTR")))}},T.Blocks.field_attr_xy={init(){this.jsonInit(n(["x","y"],"Number")),this.setTooltip(()=>i.FIELD_ATTR_XY_TOOLTIP.replace("%1",i.$(this.getFieldValue("KEY"),"ATTR")))}},T.Blocks.field_attr_size={init(){this.jsonInit(n(["width","height"],"Number")),this.setTooltip(()=>i.FIELD_ATTR_SIZE_TOOLTIP.replace("%1",i.$(this.getFieldValue("KEY"),"ATTR")))}},T.Blocks.field_attr_bgcolor={init(){this.jsonInit(n("bgcolor","Colour")),this.setTooltip(i.FIELD_ATTR_BGCOLOR_TOOLTIP)}},T.Blocks.field_attr_opacity={init(){this.jsonInit(n("opacity","Number")),this.setTooltip(i.FIELD_ATTR_OPACITY_TOOLTIP)}},T.Blocks.field_attr_rotate={init(){this.jsonInit(n("rotate","Number")),this.setTooltip(i.FIELD_ATTR_ROTATE_TOOLTIP)}},T.Blocks.field_attr_scale={init(){this.jsonInit(n(["scaleX","scaleY"],"Number")),this.setTooltip(()=>i.FIELD_ATTR_SCALE_TOOLTIP.replace("%1",i.$(this.getFieldValue("KEY"),"ATTR")))}},T.Blocks.field_attr_translate={init(){this.jsonInit(n(["translateX","translateY"],"Number")),this.setTooltip(()=>i.FIELD_ATTR_TRANSLATE_TOOLTIP.replace("%1",i.$(this.getFieldValue("KEY"),"ATTR")))}},T.Blocks.field_attr_skew={init(){this.jsonInit(n(["skewX","skewY"],"Number")),this.setTooltip(()=>i.FIELD_ATTR_SKEW_TOOLTIP.replace("%1",i.$(this.getFieldValue("KEY"),"ATTR")))}},T.Blocks.field_attr_borderRadius={init(){this.jsonInit(n("borderRadius","Number")),this.setTooltip(i.FIELD_ATTR_BORDERRADIUS_TOOLTIP)}},T.Blocks.field_attr_borderWidth={init(){this.jsonInit(n("borderWidth","Number")),this.setTooltip(i.FIELD_ATTR_BORDERWIDTH_TOOLTIP)}},T.Blocks.field_attr_borderStyle={init(){this.jsonInit(n({prop:"borderStyle",options:["solid","dashed"]},"String")),this.setTooltip(i.FIELD_ATTR_BORDERSTYLE_TOOLTIP)}},T.Blocks.field_attr_borderColour={init(){this.jsonInit(n("borderColor","Colour")),this.setTooltip(i.FIELD_ATTR_BORDERCOLOR_TOOLTIP)}},T.Blocks.field_attr_dashOffset={init(){this.jsonInit(n("dashOffset","Number")),this.setTooltip(i.FIELD_ATTR_DASHOFFSET_TOOLTIP)}},T.Blocks.field_attr_texture={init(){this.jsonInit(n("texture","String",T.Msg.ATTRS_SPRITE_HUE)),this.setTooltip(i.FIELD_ATTR_TEXTURE_TOOLTIP)}},T.Blocks.field_attr_text={init(){this.jsonInit(n("text","String",T.Msg.ATTRS_LABEL_HUE)),this.setTooltip(i.FIELD_ATTR_TEXT_TOOLTIP)}},T.Blocks.field_attr_fontSize={init(){this.jsonInit(n("fontSize","Number",T.Msg.ATTRS_LABEL_HUE)),this.setTooltip(i.FIELD_ATTR_FONTSIZE_TOOLTIP)}},T.Blocks.field_attr_fontFamily={init(){this.jsonInit(n("fontFamily","String",T.Msg.ATTRS_LABEL_HUE)),this.setTooltip(i.FIELD_ATTR_FONTFAMILY_TOOLTIP)}},T.Blocks.field_attr_fontStyle={init(){this.jsonInit(n({prop:"fontStyle",options:["normal","italic","oblique"]},"String",T.Msg.ATTRS_LABEL_HUE)),this.setTooltip(i.FIELD_ATTR_FONTSTYLE_TOOLTIP)}},T.Blocks.field_attr_fontVariant={init(){this.jsonInit(n({prop:"fontVariant",options:["normal","small-caps"]},"String",T.Msg.ATTRS_LABEL_HUE)),this.setTooltip(i.FIELD_ATTR_FONTVARIANT_TOOLTIP)}},T.Blocks.field_attr_fontWeight={init(){this.jsonInit(n({prop:"fontWeight",options:["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]},"String",T.Msg.ATTRS_LABEL_HUE)),this.setTooltip(i.FIELD_ATTR_FONTWEIGHT_TOOLTIP)}},T.Blocks.field_attr_textAlign={init(){this.jsonInit(n({prop:"textAlign",options:["left","right","center"]},"String",T.Msg.ATTRS_LABEL_HUE)),this.setTooltip(i.FIELD_ATTR_TEXTALIGN_TOOLTIP)}},T.Blocks.field_attr_lineHeight={init(){this.jsonInit(n("lineHeight","Number",T.Msg.ATTRS_LABEL_HUE)),this.setTooltip(i.FIELD_ATTR_LINEHEIGHT_TOOLTIP)}},T.Blocks.field_attr_d={init(){this.jsonInit(n("d","String",T.Msg.ATTRS_PATH_HUE)),this.setTooltip(i.FIELD_ATTR_D_TOOLTIP)}},T.Blocks.field_attr_lineWidth={init(){this.jsonInit(n("lineWidth","Number",T.Msg.ATTRS_PATH_HUE)),this.setTooltip(i.FIELD_ATTR_LINEWIDTH_TOOLTIP)}},T.Blocks.field_attr_lineDash={init(){this.jsonInit(n("lineDash","String",T.Msg.ATTRS_PATH_HUE)),this.setTooltip(i.FIELD_ATTR_LINEDASH_TOOLTIP)}},T.Blocks.field_attr_lineDashOffset={init(){this.jsonInit(n("lineDashOffset","Number",T.Msg.ATTRS_PATH_HUE)),this.setTooltip(i.FIELD_ATTR_LINEDASHOFFSET_TOOLTIP)}},T.Blocks.field_attr_lineCap={init(){this.jsonInit(n({prop:"lineCap",options:["butt","round","square"]},"String",T.Msg.ATTRS_PATH_HUE)),this.setTooltip(i.FIELD_ATTR_LINECAP_TOOLTIP)}},T.Blocks.field_attr_lineJoin={init(){this.jsonInit(n({prop:"lineJoin",options:["miter","round","bevel"]},"String",T.Msg.ATTRS_PATH_HUE)),this.setTooltip(i.FIELD_ATTR_LINEJOIN_TOOLTIP)}},T.Blocks.field_attr_bounding={init(){this.jsonInit(n({prop:"bounding",options:["box","path"]},"String",T.Msg.ATTRS_PATH_HUE)),this.setTooltip(()=>i.FIELD_ATTR_BOUNDING_TOOLTIP.replace("%1",i.$(this.getFieldValue("VALUE"),"ATTR_VALUE")))}},T.Blocks.field_attr_strokeColour={init(){this.jsonInit(n("strokeColor","Colour",T.Msg.ATTRS_PATH_HUE)),this.setTooltip(i.FIELD_ATTR_STROKECOLOR_TOOLTIP)}},T.Blocks.field_attr_fillColour={init(){this.jsonInit(n("fillColor","Colour",T.Msg.ATTRS_PATH_HUE)),this.setTooltip(i.FIELD_ATTR_FILLCOLOR_TOOLTIP)}},T.Blocks.field_attr_cursor={init(){this.jsonInit(n({prop:"cursor",options:["default","crosshair","pointer","move","e-resize","ne-resize","nw-resize","n-resize","se-resize","sw-resize","s-resize","w-resize","text","wait","help"]},"String",T.Msg.ATTRS_HUE)),this.setTooltip(i.FIELD_ATTR_CURSOR_TOOLTIP)}},T.Blocks.field_attr_draggable={init(){this.jsonInit(n({prop:"draggable",options:["yes","no"]},"String",T.Msg.ATTRS_HUE)),this.setTooltip(i.FIELD_ATTR_DRAGGABLE_TOOLTIP)}},T.Blocks.field_attr_textureFrame={init(){this.jsonInit({message0:i.FIELD_ATTR_TEXTUREFRAME_MSG0,args0:[{type:"input_value",name:"FRAME",check:"String"}],message1:i.FIELD_ATTR_TEXTUREFRAME_MSG1,args1:[{type:"input_value",name:"DURATION",check:"Number"}],nextStatement:"KeyValue",previousStatement:"KeyValue",colour:T.Msg.ATTRS_SPRITE_HUE,tooltip:i.FIELD_ATTR_TEXTUREFRAME_TOOLTIP})}},T.JavaScript.field_attr_textureFrame=function(t){return`\n'${`textureFrame$${Math.random().toString(16).slice(2)}`}': ${`[${T.JavaScript.valueToCode(t,"FRAME",T.JavaScript.ORDER_NONE)||"null"}, ${T.JavaScript.valueToCode(t,"DURATION",T.JavaScript.ORDER_NONE)||"100"}]`},`},Object.keys(T.Blocks).forEach(t=>{0!==t.indexOf("field_attr")||T.JavaScript[t]||(T.JavaScript[t]=o)})},function(t,e,_){const T=_(0),i=T.Msg,n=i.ANIMATE_HUE;T.Blocks.await={init(){this.jsonInit({message0:i.AWAIT_MSG0,args0:[{type:"field_number",name:"MILLISEC",value:16}],colour:n,previousStatement:"Statement",nextStatement:null,tooltip:()=>i.AWAIT_TOOLTIP.replace("%1",this.getFieldValue("MILLISEC"))})}},T.JavaScript.await=function(t){return`await spritly.runtime.wait(${parseInt(t.getFieldValue("MILLISEC"),10)});\n`},T.Blocks.await_frame={init(){this.jsonInit({message0:i.AWAIT_FRAME_MSG0,args0:[{type:"field_dropdown",name:"LAYER",options:[[i.COMMON_FGLAYER,"fglayer"],[i.COMMON_BGLAYER,"bglayer"]]}],colour:n,previousStatement:"Statement",nextStatement:"Statement",tooltip:i.AWAIT_FRAME_TOOLTIP})}},T.JavaScript.await_frame=function(t){return`await spritly.runtime.scene.layer('${t.getFieldValue("LAYER")}').prepareRender();\n`},T.Blocks.sprite_animate={init(){this.jsonInit({message0:i.SPRITE_ANIMATE_MSG0,args0:[{type:"field_dropdown",name:"ASYNC?",options:[[i.SPRITE_ANIMATE_OPTION_ASYNC_DEFAULT,"-"],[i.SPRITE_ANIMATE_OPTION_ASYNC_AWAIT,"await"]]},{type:"input_value",name:"SPRITE",check:"Sprite"},{type:"input_value",name:"DURATION",check:"Number"}],message1:i.SPRITE_ANIMATE_MSG1,args1:[{type:"input_statement",name:"FROM_ATTRS",check:"KeyValue"}],message2:i.SPRITE_ANIMATE_MSG2,args2:[{type:"input_statement",name:"TO_ATTRS",check:"KeyValue"}],message3:i.SPRITE_ANIMATE_MSG3,args3:[{type:"input_value",name:"EASING",check:"String"}],colour:n,previousStatement:"Statement",nextStatement:"Statement",tooltip:i.SPRITE_ANIMATE_TOOLTIP})}},T.JavaScript.sprite_animate=function(t){const e="await"===t.getFieldValue("ASYNC?"),_=T.JavaScript.valueToCode(t,"SPRITE",T.JavaScript.ORDER_NONE)||"null",i=T.JavaScript.valueToCode(t,"DURATION",T.JavaScript.ORDER_NONE)||600,n=T.JavaScript.valueToCode(t,"EASING",T.JavaScript.ORDER_NONE)||'"ease"';let o=`${_}.animate([{${T.JavaScript.statementToCode(t,"FROM_ATTRS")}\n},{${T.JavaScript.statementToCode(t,"TO_ATTRS")}\n}], {duration: ${1e3*i}, fill: 'forwards', easing: ${n}})`;return e&&(o=`if(!${_}.layer) console.error('${_} must append to layer before animated!'); \nawait ${o}.finished`),`${o};\n`},T.Blocks.easing={init(){this.jsonInit({message0:"%1",args0:[{type:"field_dropdown",name:"EASING",options:[[i.EASING_OPTION_EASING_EASE,"ease"],[i.EASING_OPTION_EASING_EASEIN,"ease-in"],[i.EASING_OPTION_EASING_EASEOUT,"ease-out"],[i.EASING_OPTION_EASING_EASEINOUT,"ease-in-out"]]}],colour:n,output:"String",tooltip:i.EASING_OPTION_TOOLTIP})}},T.JavaScript.easing=function(t){return[`'${t.getFieldValue("EASING")}'`,T.JavaScript.ORDER_NONE]},T.Blocks.bezier_easing={init(){this.jsonInit({message0:i.BEZIER_EASING_MSG0,args0:[{type:"field_number",name:"X0",value:.68},{type:"field_number",name:"Y0",value:-.55},{type:"field_number",name:"X1",value:.265},{type:"field_number",name:"Y1",value:1.55}],colour:n,output:"String",tooltip:i.BEZIER_EASING_TOOLTIP})}},T.JavaScript.bezier_easing=function(t){return[`'cubic-bezier(${t.getFieldValue("X0")},${t.getFieldValue("Y0")},${t.getFieldValue("X1")},${t.getFieldValue("Y1")})'`,T.JavaScript.ORDER_NONE]}},function(t,e,_){const T=_(0),i=T.Msg;T.Blocks.nil={init(){this.jsonInit({message0:"%1",args0:[{type:"field_dropdown",name:"VALUE",options:[[i.LITERAL_NULL,"null"],[i.LITERAL_UNDEFINED,"undefined"]]}],colour:i.LITERAL_HUE}),this.setOutput(!0),this.setTooltip(()=>i.NIL_TOOLTIP.replace("%1",this.getFieldValue("VALUE")))}},T.JavaScript.nil=function(t){return[t.getFieldValue("VALUE"),T.JavaScript.ORDER_NONE]},T.Blocks.boolean={init(){T.Blocks.logic_boolean.init.call(this),this.setColour(T.Msg.LITERAL_HUE)}},T.JavaScript.boolean=T.JavaScript.logic_boolean,T.Blocks.number={init(){T.Blocks.math_number.init.call(this),this.setColour(T.Msg.LITERAL_HUE)}},T.JavaScript.number=T.JavaScript.math_number,T.Blocks.string={init(){T.Blocks.text.init.call(this),this.setColour(T.Msg.LITERAL_HUE)}},T.JavaScript.string=T.JavaScript.text,T.Blocks.object_create={init(){this.appendDummyInput().appendField("new Object"),this.appendStatementInput("FIELDS").setCheck(["KeyValue"]),this.setOutput(!0),this.setColour(i.LITERAL_HUE),this.setTooltip(i.OBJECT_CREATE_TOOLTIP)}},T.JavaScript.object_create=function(t){return[`{${T.JavaScript.statementToCode(t,"FIELDS")}\n}`,T.JavaScript.ORDER_MEMBER]};const n=T.Blocks.colour_picker.init;T.Blocks.colour_picker.init=function(){n.call(this),this.setColour(T.Msg.LITERAL_HUE)},T.Blocks.loop_get_index={init(){this.jsonInit({message0:i.LOOP_GET_INDEX_MSG0,colour:i.LITERAL_HUE,output:"Number",tooltip:i.LOOP_GET_INDEX_TOOLTIP})}},T.JavaScript.loop_get_index=function(t){return["index",T.JavaScript.ORDER_NONE]}},function(t,e,_){const T=_(0),i=T.Msg,n=T.Msg.LOG_HUE;T.Blocks.log_log={init(){this.jsonInit({message0:"📋 %1 %2",args0:[{type:"field_dropdown",name:"LOG",options:[[i.LOG_OPTION_LOG_LOG,"log"],[i.LOG_OPTION_LOG_WARN,"warn"],[i.LOG_OPTION_LOG_ERROR,"error"]]},{type:"input_value",name:"MSG"}],colour:n,previousStatement:"Statement",nextStatement:"Statement",tooltip:i.LOG_TOOLTIP})}},T.JavaScript.log_log=function(t){const e=T.JavaScript.valueToCode(t,"MSG",T.JavaScript.ORDER_NONE);return`console.${t.getFieldValue("LOG")}(${e});\n`},T.Blocks.log_alert={init(){this.jsonInit({message0:i.LOG_ALERT_MSG0,args0:[{type:"input_value",name:"MSG"}],colour:n,previousStatement:"Statement",nextStatement:"Statement",tooltip:i.LOG_ALERT_TOOLTIP})}},T.JavaScript.log_alert=function(t){return`alert(${T.JavaScript.valueToCode(t,"MSG",T.JavaScript.ORDER_NONE)});\n`}},function(t,e,_){const T=_(0),i=T.Msg,n=T.Msg.MATH_HUE;T.Blocks.random_string={init(){this.jsonInit({message0:i.RANDOM_STRING_MSG0,colour:n,output:"String",tooltip:i.RANDOM_STRING_TOOLTIP})}},T.JavaScript.random_string=function(t){return["'Math.random().toString(36).slice(2)'",T.JavaScript.ORDER_NONE]},T.Blocks.random_colour_rgb={init(){this.jsonInit({message0:i.RANDOM_COLOUR_RGB_MSG0,colour:n,output:"Colour",tooltip:i.RANDOM_COLOUR_RGB_TOOLTIP})}},T.JavaScript.random_colour_rgb=function(t){return["spritly.runtime.random_color()",T.JavaScript.ORDER_NONE]},T.Blocks.random_colour_hue={init(){this.jsonInit({message0:i.RANDOM_COLOUR_HUE_MSG0,message1:i.RANDOM_COLOUR_HUE_MSG1,args1:[{type:"field_number",name:"S",value:100},{type:"field_number",name:"L",value:50},{type:"field_number",name:"A",value:1}],colour:n,output:"Colour",tooltip:i.RANDOM_COLOUR_HUE_TOOLTIP})}},T.JavaScript.random_colour_hue=function(t){Math.floor(360*Math.random());return[`spritly.runtime.random_color_hue(${t.getFieldValue("S")},${t.getFieldValue("L")},${t.getFieldValue("A")})`,T.JavaScript.ORDER_NONE]}},function(t,e,_){const T=_(0),i=T.Msg,n=i.LISTS_HUE;T.Blocks.lists_create_range={init(){this.jsonInit({message0:i.LISTS_CREATE_RANGE_MSG0,message1:i.LISTS_CREATE_RANGE_MSG1,args1:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Array",colour:n,tooltip:i.LISTS_CREATE_RANGE_TOOLTIP})}},T.JavaScript.lists_create_range=function(t){const e=T.JavaScript.valueToCode(t,"FROM",T.JavaScript.ORDER_ASSIGNMENT)||"0",_=T.JavaScript.valueToCode(t,"TO",T.JavaScript.ORDER_ASSIGNMENT)||"0";return[`(Array.from({length: Math.abs(${e} - ${_}) + 1}).map((_, i) => ${e} + (${e} - ${_} > 0 ? -1 : 1) * i))`,T.JavaScript.ORDER_NONE]}},function(t,e,_){const T=_(0),i=T.Msg;T.Blocks.key_value={init(){this.jsonInit({message0:i.KEYVALUE_MSG0,args0:[{type:"input_value",name:"KEY",check:"String"},{type:"input_value",name:"VALUE"}],colour:i.GETTER_SETTER_HUE,previousStatement:"KeyValue",nextStatement:"KeyValue"}),this.setTooltip(i.KEYVALUE_TOOLTIP)}},T.JavaScript.key_value=function(t){return`\n${T.JavaScript.valueToCode(t,"KEY",T.JavaScript.ORDER_NONE)||"key"}: ${T.JavaScript.valueToCode(t,"VALUE",T.JavaScript.ORDER_NONE)||"null"},`},T.Blocks.object_get_prop={init(){this.jsonInit({message0:i.OBJECT_GET_PROP_MSG0,args0:[{type:"input_value",name:"OBJECT"},{type:"input_value",name:"PROP",check:"String"}],inputsInline:!0,output:null,colour:i.GETTER_SETTER_HUE}),this.setTooltip(i.OBJECT_GET_PROP_TOOLTIP)}},T.JavaScript.object_get_prop=function(t){return[`${T.JavaScript.valueToCode(t,"OBJECT",T.JavaScript.ORDER_NONE)||"Object()"}[${T.JavaScript.valueToCode(t,"PROP",T.JavaScript.ORDER_NONE)||"key"}]`,T.JavaScript.ORDER_NONE]}},function(t,e,_){const T=_(0),i=T.Msg,n=i.STORE_HUE;T.Blocks.store_set={init(){this.jsonInit({message0:i.STORE_SET_MSG0,args0:[{type:"input_value",name:"KEY",check:"String"},{type:"input_value",name:"VALUE"}],inputsInline:!0,colour:n,previousStatement:"Statement",nextStatement:"Statement",tooltip:i.STORE_SET_TOOLTIP})}},T.JavaScript.store_set=function(t){return`spritly.runtime.Store.set(${T.JavaScript.valueToCode(t,"KEY",T.JavaScript.ORDER_MEMBER)||"'key'"}, ${T.JavaScript.valueToCode(t,"VALUE",T.JavaScript.ORDER_ASSIGNMENT)||"null"}, target);\n`},T.Blocks.store_get={init(){this.jsonInit({message0:i.STORE_GET_MSG0,args0:[{type:"input_value",name:"KEY",check:"String"}],colour:n,output:null,tooltip:i.STORE_GET_TOOLTIP})}},T.JavaScript.store_get=function(t){return[`spritly.runtime.Store.get(${T.JavaScript.valueToCode(t,"KEY",T.JavaScript.ORDER_MEMBER)||"'key'"})`,T.JavaScript.ORDER_NONE]},T.Blocks.store_delete={init(){this.jsonInit({message0:i.STORE_DELETE_MSG0,args0:[{type:"input_value",name:"KEY",check:"String"}],colour:n,output:null,tooltip:i.STORE_DELETE_TOOLTIP})}},T.JavaScript.store_delete=function(t){return[`spritly.runtime.Store.delete(${T.JavaScript.valueToCode(t,"KEY",T.JavaScript.ORDER_MEMBER)||"'key'"})`,T.JavaScript.ORDER_NONE]}},function(t,e,_){const T=_(0),i=T.Msg,n=i.SOUND_HUE;T.Blocks.sound_play={init(){this.jsonInit({message0:i.SOUND_PLAY_MSG0,args0:[{type:"input_value",name:"SOUND",check:"String"}],colour:n,previousStatement:"Statement",nextStatement:"Statement",tooltip:i.SOUND_PLAY_TOOLTIP})}},T.JavaScript.sound_play=function(t){return`spritly.runtime.Audio.play(${T.JavaScript.valueToCode(t,"SOUND",T.JavaScript.ORDER_NONE)});\n`}},,function(t,e,_){"use strict";_.r(e);_(1),_(2);const T=_(0),{Msg:i}=T;i.$=((t,e="COMMON")=>{const _=`${e}_${t.toUpperCase()}`;return _ in i?i[_]:t});_(3),_(4);const n=new Map,o={set(t,e){const _=n.get(t)||new Set;return _.add(e),n.set(t,_),_},get:t=>[...n.get(t)||[]],clear(){n.clear()}},E=_(0),a=E.Msg,s=E.Blocks.controls_if.init;E.Blocks.controls_if.init=function(){s.call(this);for(let t=0;t<20;t++){const e=this.getInput(`DO${t}`);if(!e)break;e.setCheck("Statement")}this.setNextStatement(!0,"Statement"),this.setPreviousStatement(!0,"Statement"),this.setColour(a.FLOWS_HUE)},E.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN.saveConnections=function(t){let e,_,T=t.nextConnection.targetBlock(),i=1;for(;T;){switch(T.type){case"controls_if_elseif":e=this.getInput(`IF${i}`),(_=this.getInput(`DO${i}`)).setCheck("Statement"),T.valueConnection_=e&&e.connection.targetConnection,T.statementConnection_=_&&_.connection.targetConnection,i++;break;case"controls_if_else":(_=this.getInput("ELSE")).setCheck("Statement"),T.statementConnection_=_&&_.connection.targetConnection;break;default:throw TypeError(`Unknown block type: ${T.type}`)}T=T.nextConnection&&T.nextConnection.targetBlock()}};const r=E.Blocks.controls_repeat_ext.init;E.Blocks.controls_repeat_ext.init=function(){r.call(this),this.getInput("DO").setCheck("Statement"),this.setNextStatement(!0,"Statement"),this.setPreviousStatement(!0,"Statement"),this.setColour(a.FLOWS_HUE)},E.JavaScript.controls_repeat_ext=function(t){let e;e=t.getField("TIMES")?String(Number(t.getFieldValue("TIMES"))):E.JavaScript.valueToCode(t,"TIMES",E.JavaScript.ORDER_ASSIGNMENT)||"0";let _=E.JavaScript.statementToCode(t,"DO");_=E.JavaScript.addLoopTrap(_,t.id);let T="";const i=E.JavaScript.variableDB_.getDistinctName("count",E.Variables.NAME_TYPE);let n=e,o="";return e.match(/^\w+$/)||E.isNumber(e)||(o=`, ${n=E.JavaScript.variableDB_.getDistinctName("repeat_end",E.Variables.NAME_TYPE)} = ${e}`),T+=`for(let ${i} = 0${o}; ${i} < ${n}; ${i}++){\n${_}}\n`};const O=E.Blocks.controls_whileUntil.init;E.Blocks.controls_whileUntil.init=function(){O.call(this),this.getInput("DO").setCheck("Statement"),this.setNextStatement(!0,"Statement"),this.setPreviousStatement(!0,"Statement"),this.setColour(a.FLOWS_HUE)},E.Blocks.list_foreach={init(){this.jsonInit({message0:a.LIST_FOREACH_MSG0,args0:[{type:"input_value",name:"LIST",check:["String","Array"]}],message1:a.LIST_FOREACH_MSG1,args1:[{type:"input_statement",name:"DO",check:"Statement"}],message2:a.LIST_FOREACH_MSG2,args2:[{type:"field_input",name:"ITEM",text:"item"},{type:"field_dropdown",name:"INDEX",options:["i","j","k","l","m"].map(t=>[t,t])}],colour:a.FLOWS_HUE,previousStatement:"Statement",nextStatement:"Statement",tooltip:a.LIST_FOREACH_TOOLTIP})}},E.JavaScript.list_foreach=function(t){const e=E.JavaScript.valueToCode(t,"LIST",E.JavaScript.ORDER_NONE)||"[]",_=t.getFieldValue("ITEM"),T=t.getFieldValue("INDEX");let i=E.JavaScript.statementToCode(t,"DO"),n=/^([\s\t]+)/.exec(i);return n=n?`\n${n[0]}`:`\n${E.Generator.prototype.INDENT}`,i&&(i=`${i}\n`),`await ${e}.reduce(async function($$prestep, ${_}, ${T}) {${n}await $$prestep;\n${i}}, null);\n`},E.Blocks.list_index={init(){this.jsonInit({message0:"%1",args0:[{type:"field_dropdown",name:"INDEX",options:["i","j","k","l","m"].map(t=>[t,t])}],output:"Number",colour:a.FLOWS_HUE,tooltip:a.LIST_INDEX_TOOLTIP})}},E.JavaScript.list_index=function(t){return[t.getFieldValue("INDEX"),E.JavaScript.ORDER_NONE]},E.Blocks.list_item={init(){this.jsonInit({message0:"%1",args0:[{type:"field_dropdown",name:"ITEM",options:()=>{const t=o.get("ListItems");return t.length?t.map(t=>[t,t]):[["item","item"]]}}],output:null,colour:a.FLOWS_HUE,tooltip:a.LIST_ITEM_TOOLTIP})}},E.JavaScript.list_item=function(t){return[t.getFieldValue("ITEM"),E.JavaScript.ORDER_NONE]};_(5);const S=_(0),l=S.Msg,R=S.Msg.SIGNALS_HUE;function A(...t){const e=["START","STORE_PROPERTY_UPDATE","LAYER_CLICKED","KEYDOWN","KEYUP","ELEMENT_CREATED","ELEMENT_DESTROYED"];return()=>[...e,...t,...o.get("Signals")].map(t=>[l.$(t,"SIGNAL_DO_OPTION_SIGNAL"),t])}function I(){const t=o.get("Sprites");return t.length>0?t.map(t=>[t,t]):[["",""]]}S.Blocks.signal_do={init(){this.jsonInit({message0:l.SIGNAL_DO_MSG0,args0:[{type:"field_dropdown",name:"SIGNAL",options:A()}],colour:R,nextStatement:"Statement",tooltip:l.SIGNAL_DO_TOOLTIP})}},S.JavaScript.signal_do=function(t){return""},S.Blocks.signal_new_sprite_as_receiver={init(){this.jsonInit({message0:l.SIGNAL_NEW_SPRITE_AS_RECEIVER_MSG0,args0:[{type:"field_dropdown",name:"SIGNAL",options:A()}],message1:l.SIGNAL_NEW_SPRITE_AS_RECEIVER_MSG1,args1:[{type:"field_dropdown",name:"RECEIVER",options:[[l.COMMON_SPRITE,"Sprite"],[l.COMMON_LABEL,"Label"],[l.COMMON_PATH,"Path"]]}],message2:l.SIGNAL_NEW_SPRITE_AS_RECEIVER_MSG2,args2:[{type:"field_input",name:"ID",check:"String",text:`Sprite_${Math.random().toString().slice(2,7)}`}],colour:R,nextStatement:"Statement",tooltip:l.SIGNAL_NEW_SPRITE_AS_RECEIVER_TOOLTIP})}},S.JavaScript.signal_new_sprite_as_receiver=function(t){return""},S.Blocks.signal_when_receiver_is={init(){this.jsonInit({message0:l.SIGNAL_WHEN_RECEIVER_IS_MSG0,args0:[{type:"field_dropdown",name:"SIGNAL",options:A("ELEMENT_CREATED")}],message1:l.SIGNAL_WHEN_RECEIVER_IS_MSG1,args1:[{type:"field_dropdown",name:"ID",options:I}],colour:R,nextStatement:"Statement",tooltip:l.SIGNAL_NEW_SPRITE_AS_RECEIVER_TOOLTIP})}},S.JavaScript.signal_when_receiver_is=function(){return""},S.Blocks.get_data={init(){this.jsonInit({message0:l.GET_DATA_MSG0,colour:R,output:"Object",tooltip:l.GET_DATA_TOOLTIP})}},S.JavaScript.get_data=function(t){return["data",S.JavaScript.ORDER_NONE]},S.Blocks.get_data_prop={init(){this.jsonInit({message0:l.GET_DATA_PROP_MSG0,args0:[{type:"field_dropdown",name:"PROP",options:["offsetX","offsetY","layerX","layerY","altKey","ctrlKey","shiftKey","buttons","key","keyCode"].map(t=>[l.$(t,"GET_DATA_PROP_OPTION_PROP"),t])}],colour:R,output:["Number","String","Boolean"],tooltip:l.GET_DATA_PROP_TOOLTIP})}},S.JavaScript.get_data_prop=function(t){return[`data[spritly.runtime.Symbols.${t.getFieldValue("PROP")}]`,S.JavaScript.ORDER_NONE]},S.Blocks.get_store_data_prop={init(){this.jsonInit({message0:l.GET_DATA_PROP_MSG0,args0:[{type:"field_dropdown",name:"PROP",options:["property","oldValue","newValue"].map(t=>[l.$(t,"GET_DATA_PROP_OPTION_PROP"),t])}],colour:R,output:null,tooltip:l.GET_DATA_PROP_TOOLTIP2})}},S.JavaScript.get_store_data_prop=function(t){return[`data[spritly.runtime.Symbols.${t.getFieldValue("PROP")}]`,S.JavaScript.ORDER_MEMBER]};const p=["immediately","onclick","ondblclick","onmousedown","onmousemove","onmouseup","onmouseenter","onmouseleave","ondragged","ondraggedonto","oncollision"];S.Blocks.signal_onevent_send={init(){this.jsonInit({message0:l.SIGNAL_ONEVENT_SEND_MSG0,args0:[{type:"input_value",name:"SPRITE",check:"Sprite"},{type:"field_dropdown",name:"EVENT",options:p.map(t=>[l.$(t,"EVENT"),t])},{type:"field_input",name:"SIGNAL",text:"MY_SIGNAL"}],message1:l.SIGNAL_ONEVENT_SEND_MSG1,args1:[{type:"input_statement",name:"DATA",check:"KeyValue"}],colour:R,previousStatement:"Statement",nextStatement:"Statement",tooltip:`${l.SIGNAL_ONEVENT_SEND_TOOLTIP}\n${l.SENDER_RECEIVER_TARGET_TOOLTIP}`})}},S.JavaScript.signal_onevent_send=function(t){const e=S.JavaScript.valueToCode(t,"SPRITE",S.JavaScript.ORDER_NONE)||"null",_=t.getFieldValue("EVENT"),T=t.getFieldValue("SIGNAL"),i=S.JavaScript.statementToCode(t,"DATA");if("immediately"!==_&&"oncollision"!==_){return`${e}.on('${_.slice(2)}', \n  evt => {\n    const {altKey, buttons, ctrlKey, shiftKey} = evt.originalEvent;\n    const runtime = spritly.runtime;\n    runtime.Signal.send('${T}', ${e},\n      Object.assign(\n        {\n          [runtime.Symbols.target]: evt.target,\n          [runtime.Symbols.offsetX]: evt.offsetX,\n          [runtime.Symbols.offsetY]: evt.offsetY,\n          [runtime.Symbols.layerX]: evt.layerX,\n          [runtime.Symbols.layerY]: evt.layerY,\n          [runtime.Symbols.altKey]: altKey,\n          [runtime.Symbols.buttons]: buttons,\n          [runtime.Symbols.ctrlKey]: ctrlKey,\n          [runtime.Symbols.shiftKey]: shiftKey,\n        },\n        {${i}},\n      ));\n  });`}return"oncollision"===_?`${e}.on('update', () => {\n  spritly.runtime.getCollisions(${e}).forEach((s) => {\n    spritly.runtime.Signal.send('${T}', ${e}, {[spritly.runtime.Symbols.target]: s});      \n  });\n});\n${e}.forceUpdate();\n`:`spritly.runtime.Signal.send('${T}', ${e}, {${i}});\n`};const L=_(0).Msg;const c=_(0),u=c.Msg,N=c.Msg.SPRITE_HUE,P={type:"field_dropdown",name:"SPRITE",options:function(){const t=o.get("Sprites");return[[L.COMMON_TARGET,"target"],[L.COMMON_SENDER,"sender"],[L.COMMON_RECEIVER,"receiver"]].concat(t.map(t=>[t,t]))}};function m(){return["id","name","anchorX","anchorY","x","y","width","height","bgcolor","opacity","rotate","scaleX","scaleY","translateX","translateY","skewX","skewY","borderRadius","borderWidth","borderStyle","borderColor","dashOffset","texture","text","fontSize","fontFamily","fontStyle","fontVariant","fontWeight","textAlign","lineHeight","d","lineWidth","lineDash","lineDashOffset","lineCap","lineJoin","bounding","strokeColor","fillColor"].map(t=>[u.$(t,"ATTR"),t])}c.Blocks.sprite={init(){this.jsonInit({message0:"%1",args0:[P],colour:N,output:"Sprite",tooltip:u.SPRITE_MSG0_TOOLTIP})}},c.JavaScript.sprite=function(t){let e=t.getFieldValue("SPRITE");return"target"!==e&&"sender"!==e&&"receiver"!==e&&"item"!==e&&(e=`spritly.runtime.ElementList.getElementById('${e}')`),[e,c.JavaScript.ORDER_NONE]},c.Blocks.sprite_append_to={init(){this.jsonInit({message0:u.SPRITE_APPEND_TO_MSG0,args0:[{type:"input_value",name:"SPRITE",check:"Sprite"},{type:"field_dropdown",name:"LAYER",options:[[u.COMMON_FGLAYER,"fglayer"],[u.COMMON_BGLAYER,"bglayer"]]}],colour:N,previousStatement:"Statement",nextStatement:"Statement",tooltip:`${u.SPRITE_APPEND_TO_TOOLTIP}\n${u.FGLAYER_BGLAYER_TOOTIP}`})}},c.JavaScript.sprite_append_to=function(t){const e=c.JavaScript.valueToCode(t,"SPRITE",c.JavaScript.ORDER_NONE)||"null";return`spritly.runtime.scene.layer('${t.getFieldValue("LAYER")}').append(${e});\n`},c.Blocks.sprite_attrs={init(){this.jsonInit({message0:u.SPRITE_ATTRS_MSG0,args0:[{type:"input_value",name:"SPRITE",check:"Sprite"}],message1:"%1",args1:[{type:"input_statement",name:"ATTRS",check:"KeyValue"}],colour:N,previousStatement:"Statement",nextStatement:"Statement",tooltip:u.SPRITE_ATTRS_TOOLTIP})}},c.JavaScript.sprite_attrs=function(t){const e=c.JavaScript.valueToCode(t,"SPRITE",c.JavaScript.ORDER_NONE)||"null";return`${e}.attr(spritly.runtime.parse_attr(${e}, {${c.JavaScript.statementToCode(t,"ATTRS")}\n}));\n`},c.Blocks.sprite_create_attrs={init(){this.jsonInit({message0:u.SPRITE_CREATE_ATTRS_MSG0,args0:[{type:"field_dropdown",name:"TYPE",options:[[u.COMMON_SPRITE,"Sprite"],[u.COMMON_LABEL,"Label"],[u.COMMON_PATH,"Path"]]}],message1:u.SPRITE_CREATE_ATTRS_MSG1,args1:[{type:"field_input",name:"NAME",text:"MyName"}],message2:"%1",args2:[{type:"input_statement",name:"ATTRS",check:"KeyValue"}],colour:N,previousStatement:"Statement",nextStatement:"Statement",tooltip:u.SPRITE_CREATE_ATTRS_TOOLTIP})}},c.JavaScript.sprite_create_attrs=function(t){return`spritly.runtime.ElementList.add(() => {\n  const sprite = spritejs.createElement('${t.getFieldValue("TYPE")}');\n  sprite.attr(spritly.runtime.parse_attr(sprite, {name: '${t.getFieldValue("NAME")}'}, {${c.JavaScript.statementToCode(t,"ATTRS").split(/\n/g).join(`\n${c.Generator.prototype.INDENT}`)}\n  }));\n  return sprite;\n});\n`},c.Blocks.sprite_each_elements_named={init(){this.jsonInit({message0:u.SPRITE_EACH_ELEMENTS_NAMED_MSG0,args0:[{type:"field_dropdown",name:"NAME",options:()=>{const t=o.get("SpriteNames");return t.length>0?t.map(t=>[t,t]):[["",""]]}}],colour:N,output:"Array",tooltip:u.SPRITE_EACH_ELEMENTS_NAMED_TOOLTIP})}},c.JavaScript.sprite_each_elements_named=function(t){return[`spritly.runtime.ElementList.getElementsByName('${t.getFieldValue("NAME")}')`,c.JavaScript.ORDER_NONE]},c.Blocks.sprite_destroy={init(){this.jsonInit({message0:u.SPRITE_DESTROY_MSG0,args0:[{type:"input_value",name:"SPRITE",check:"Sprite"}],colour:N,previousStatement:"Statement",nextStatement:"Statement",tooltip:u.SPRITE_DESTROY_TOOLTIP})}},c.JavaScript.sprite_destroy=function(t){return`spritly.runtime.ElementList.remove(${c.JavaScript.valueToCode(t,"SPRITE",c.JavaScript.ORDER_NONE)||"null"});\n`},c.Blocks.sprite_get_attr={init(){this.jsonInit({message0:u.SPRITE_GET_ATTR_MSG0,args0:[{type:"input_value",name:"SPRITE",check:"Sprite"},{type:"field_dropdown",name:"ATTR",options:m}],colour:N,output:!0,tooltip:u.SPRITE_GET_ATTR_TOOLTIP})}},c.JavaScript.sprite_get_attr=function(t){return[`spritly.runtime.get_attr(${c.JavaScript.valueToCode(t,"SPRITE",c.JavaScript.ORDER_NONE)||"null"}, '${t.getFieldValue("ATTR")}')`,c.JavaScript.ORDER_NONE]};_(6),_(7),_(8),_(9),_(10),_(11);_.d(e,"Blockly",function(){return g}),_.d(e,"initWorkspace",function(){return d}),_.d(e,"Dropdown",function(){return o});const g=_(0);function d(t,e){return g.inject(t,e)}g.BlockSvg.START_HAT=!0,g.Field.prototype.maxDisplayLength=20}]);