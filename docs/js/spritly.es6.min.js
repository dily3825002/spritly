module.exports=function(t){var e={};function n(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(i,a,function(e){return t[e]}.bind(null,a));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/js/",n(n.s=7)}([function(t,e){t.exports=require("Blockly")},function(t,e,n){const i=n(0),{Msg:a}=i;a.SPRITE_HUE=330,a.ATTRS_HUE=230,a.ATTRS_SPRITE_HUE=245,a.ATTRS_LABEL_HUE=260,a.ATTRS_PATH_HUE=275,a.FLOW_HUE=195,a.SIGNALS_HUE=55,a.LOG_HUE=350,a.LITERAL_HUE=160,a.FLOWS_HUE=120},function(t,e,n){const i=n(0);function a(t="key",e="",n=i.Msg.ATTRS_HUE,a="KeyValue"){const s={name:"KEY",type:"field_input"},o={type:"input_value",name:"VALUE",check:e};return"string"!=typeof t&&t.prop&&t.options?(s.text=t.prop,o.type="field_dropdown",o.options=t.options.map(t=>[t,t])):Array.isArray(t)?(s.type="field_dropdown",s.options=t.map(t=>[t,t])):s.text=t,{message0:"%1: %2,",args0:[s,o],colour:n,previousStatement:a,nextStatement:a}}function s(t){return`\n'${t.getFieldValue("KEY")}': ${i.JavaScript.valueToCode(t,"VALUE",i.JavaScript.ORDER_NONE)||`'${t.getFieldValue("VALUE")}'`||"null"},`}i.Blocks.field_attr_inc={init(){this.jsonInit({message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["+","+"],["-","-"],["*","*"],["/","/"],["^","**"]]},{type:"input_value",name:"VALUE",check:"Number"}],colour:i.Msg.ATTRS_HUE}),this.setOutput(!0,"Number")}},i.JavaScript.field_attr_inc=function(t){return[`v => v ${t.getFieldValue("OP")} ${i.JavaScript.valueToCode(t,"VALUE",i.JavaScript.ORDER_ADDITION)||0}`,i.JavaScript.ORDER_MEMBER]},i.Blocks.field_attr={init(){this.jsonInit(a("key","",i.Msg.ATTRS_KV_HUE)),this.setTooltip(()=>"Pair key values")}},i.Blocks.field_attr_anchor={init(){this.jsonInit(a(["anchorX","anchorY"],"Number"))}},i.Blocks.field_attr_xy={init(){this.jsonInit(a(["x","y"],"Number"))}},i.Blocks.field_attr_size={init(){this.jsonInit(a(["width","height"],"Number"))}},i.Blocks.field_attr_bgcolor={init(){this.jsonInit(a("bgcolor","Colour"))}},i.Blocks.field_attr_opacity={init(){this.jsonInit(a("opacity","Number"))}},i.Blocks.field_attr_rotate={init(){this.jsonInit(a("rotate","Number"))}},i.Blocks.field_attr_scale={init(){this.jsonInit(a(["scaleX","scaleY"],"Number"))}},i.Blocks.field_attr_translate={init(){this.jsonInit(a(["translateX","translateY"],"Number"))}},i.Blocks.field_attr_skew={init(){this.jsonInit(a(["skewX","skewY"],"Number"))}},i.Blocks.field_attr_border_radius={init(){this.jsonInit(a("borderRadius","Number"))}},i.Blocks.field_attr_borderWidth={init(){this.jsonInit(a("borderWidth","Number"))}},i.Blocks.field_attr_borderStyle={init(){this.jsonInit(a({prop:"borderStyle",options:["solid","dashed"]},"String"))}},i.Blocks.field_attr_borderColour={init(){this.jsonInit(a("borderColor","Colour"))}},i.Blocks.field_attr_dashOffset={init(){this.jsonInit(a("dashOffset","Number"))}},i.Blocks.field_attr_texture={init(){this.jsonInit(a("texture","String",i.Msg.ATTRS_SPRITE_HUE))}},i.Blocks.field_attr_text={init(){this.jsonInit(a("text","String",i.Msg.ATTRS_LABEL_HUE))}},i.Blocks.field_attr_fontSize={init(){this.jsonInit(a("fontSize","Number",i.Msg.ATTRS_LABEL_HUE))}},i.Blocks.field_attr_fontFamily={init(){this.jsonInit(a("fontFamily","String",i.Msg.ATTRS_LABEL_HUE))}},i.Blocks.field_attr_fontStyle={init(){this.jsonInit(a({prop:"fontStyle",options:["normal","italic","oblique"]},"String",i.Msg.ATTRS_LABEL_HUE))}},i.Blocks.field_attr_fontVariant={init(){this.jsonInit(a({prop:"fontVariant",options:["normal","small-caps"]},"String",i.Msg.ATTRS_LABEL_HUE))}},i.Blocks.field_attr_fontWeight={init(){this.jsonInit(a({prop:"fontWeight",options:["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]},"String",i.Msg.ATTRS_LABEL_HUE))}},i.Blocks.field_attr_textAlign={init(){this.jsonInit(a({prop:"textAlign",options:["left","right","center"]},"String",i.Msg.ATTRS_LABEL_HUE))}},i.Blocks.field_attr_lineHeight={init(){this.jsonInit(a("lineHeight","Number",i.Msg.ATTRS_LABEL_HUE))}},i.Blocks.field_attr_d={init(){this.jsonInit(a("d","String",i.Msg.ATTRS_PATH_HUE))}},i.Blocks.field_attr_lineWidth={init(){this.jsonInit(a("lineWidth","Number",i.Msg.ATTRS_LABEL_HUE))}},i.Blocks.field_attr_lineDash={init(){this.jsonInit(a("lineDash","String",i.Msg.ATTRS_LABEL_HUE))}},i.Blocks.field_attr_lineCap={init(){this.jsonInit(a({prop:"lineCap",options:["butt","round","square"]},"String",i.Msg.ATTRS_PATH_HUE))}},i.Blocks.field_attr_lineJoin={init(){this.jsonInit(a({prop:"lineJoin",options:["miter","round","bevel"]},"String",i.Msg.ATTRS_PATH_HUE))}},i.Blocks.field_attr_bounding={init(){this.jsonInit(a({prop:"bounding",options:["box","path"]},"String",i.Msg.ATTRS_PATH_HUE))}},i.Blocks.field_attr_strokeColour={init(){this.jsonInit(a("strokeColor","Colour",i.Msg.ATTRS_PATH_HUE))}},i.Blocks.field_attr_fillColour={init(){this.jsonInit(a("fillColor","Colour",i.Msg.ATTRS_PATH_HUE))}},Object.keys(i.Blocks).forEach(t=>{0===t.indexOf("field_attr")&&"field_attr_inc"!==t&&(i.JavaScript[t]=s)})},function(t,e,n){const i=n(0),a=i.Msg.FLOW_HUE;i.Blocks.flow_wait={init(){this.jsonInit({message0:"wait %1 millsec 🕙",args0:[{type:"field_input",name:"SEC",check:"Number",text:"16"}],colour:a,previousStatement:"Statement",nextStatement:null})}},i.JavaScript.flow_wait=function(t){return`await utils.wait(${parseInt(t.getFieldValue("SEC"),10)});\n`},i.Blocks.flow_frame={init(){this.jsonInit({message0:"next frame of %1 ⌛",args0:[{type:"field_dropdown",name:"LAYER",options:[["fglayer","fglayer"],["bglayer","bglayer"]]}],colour:a,previousStatement:"Statement",nextStatement:"Statement"})}},i.JavaScript.flow_frame=function(t){return`await scene.layer('${t.getFieldValue("LAYER")}').prepareRender();\n`}},function(t,e,n){const i=n(0),a=i.Blocks.controls_if.init;i.Blocks.controls_if.init=function(){a.call(this);for(let t=0;t<20;t++){const e=this.getInput(`DO${t}`);if(!e)break;e.setCheck("Statement")}this.setNextStatement(!0,"Statement"),this.setPreviousStatement(!0,"Statement"),this.setColour(i.Msg.FLOWS_HUE)},i.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN.saveConnections=function(t){let e,n,i=t.nextConnection.targetBlock(),a=1;for(;i;){switch(i.type){case"controls_if_elseif":e=this.getInput(`IF${a}`),(n=this.getInput(`DO${a}`)).setCheck("Statement"),i.valueConnection_=e&&e.connection.targetConnection,i.statementConnection_=n&&n.connection.targetConnection,a++;break;case"controls_if_else":(n=this.getInput("ELSE")).setCheck("Statement"),i.statementConnection_=n&&n.connection.targetConnection;break;default:throw TypeError(`Unknown block type: ${i.type}`)}i=i.nextConnection&&i.nextConnection.targetBlock()}};const s=i.Blocks.controls_repeat_ext.init;i.Blocks.controls_repeat_ext.init=function(){s.call(this),this.getInput("DO").setCheck("Statement"),this.setNextStatement(!0,"Statement"),this.setPreviousStatement(!0,"Statement"),this.setColour(i.Msg.FLOWS_HUE)};const o=i.Blocks.controls_whileUntil.init;i.Blocks.controls_whileUntil.init=function(){o.call(this),this.getInput("DO").setCheck("Statement"),this.setNextStatement(!0,"Statement"),this.setPreviousStatement(!0,"Statement"),this.setColour(i.Msg.FLOWS_HUE)}},function(t,e,n){const i=n(0);i.Blocks.nil={init(){this.jsonInit({message0:"%1",args0:[{type:"field_dropdown",name:"VALUE",options:[["null","null"],["undefined","undefined"]]}],colour:i.Msg.LITERAL_HUE}),this.setOutput(!0)}},i.JavaScript.nil=function(t){return[t.getFieldValue("VALUE"),i.JavaScript.ORDER_NONE]},i.Blocks.boolean={init(){i.Blocks.logic_boolean.init.call(this),this.setColour(i.Msg.LITERAL_HUE)}},i.JavaScript.boolean=i.JavaScript.logic_boolean,i.Blocks.number={init(){i.Blocks.math_number.init.call(this),this.setColour(i.Msg.LITERAL_HUE)}},i.JavaScript.number=i.JavaScript.math_number,i.Blocks.string={init(){i.Blocks.text.init.call(this),this.setColour(i.Msg.LITERAL_HUE)}},i.JavaScript.string=i.JavaScript.text;const a=i.Blocks.lists_create_with.init;i.Blocks.lists_create_with.init=function(){a.call(this),this.setColour(i.Msg.LITERAL_HUE)},i.Blocks.object_create={init(){this.appendDummyInput().appendField("new Object"),this.appendStatementInput("FIELDS").setCheck(["KeyValue"]),this.setOutput(!0),this.setColour(i.Msg.LITERAL_HUE),this.setTooltip(()=>"Create object")}},i.JavaScript.object_create=function(t){return[`{${i.JavaScript.statementToCode(t,"FIELDS")}\n}`,i.JavaScript.ORDER_MEMBER]};const s=i.Blocks.colour_picker.init;i.Blocks.colour_picker.init=function(){s.call(this),this.setColour(i.Msg.LITERAL_HUE)}},function(t,e,n){const i=n(0),a=i.Msg.LOG_HUE;i.Blocks.log_log={init(){this.jsonInit({message0:"📋 %1 %2",args0:[{type:"field_dropdown",name:"LOG",options:[["log","log"],["warn","warn"],["error","error"]]},{type:"input_value",name:"MSG"}],colour:a,previousStatement:"Statement",nextStatement:"Statement"})}},i.JavaScript.log_log=function(t){const e=i.JavaScript.valueToCode(t,"MSG",i.JavaScript.ORDER_NONE);return`console.${t.getFieldValue("LOG")}(${e});\n`},i.Blocks.log_alert={init(){this.jsonInit({message0:"🔔 alert %1",args0:[{type:"input_value",name:"MSG"}],colour:a,previousStatement:"Statement",nextStatement:"Statement"})}},i.JavaScript.log_alert=function(t){return`alert(${i.JavaScript.valueToCode(t,"MSG",i.JavaScript.ORDER_NONE)});\n`}},function(t,e,n){"use strict";n.r(e);n(1),n(2),n(3),n(4),n(5);const i=new Map,a={set(t,e){const n=i.get(t)||new Set;return n.add(e),i.set(t,n),n},get:t=>[...i.get(t)||[]],clear(){i.clear()}},s=n(0),o=s.Msg.SIGNALS_HUE;function r(){const t=a.get("Signals");return t.length>0?t.map(t=>[t,t]):[["START","START"]]}function l(){const t=a.get("Sprites");return t.length>0?t.map(t=>[t,t]):[["no sprites"],["no sprites"]]}s.Blocks.signal_do={init(){this.jsonInit({message0:"On signal %1 🚩 do",args0:[{type:"field_dropdown",name:"SIG",options:r}],colour:o,nextStatement:"Statement"})}},s.JavaScript.signal_do=function(t){return""},s.Blocks.signal_new_sprite_as_receiver={init(){this.jsonInit({message0:"On signal %1 🚩",args0:[{type:"field_dropdown",name:"SIG",options:r}],message1:"new %1 as receiver",args1:[{type:"field_dropdown",name:"RECEIVER",options:[["Sprite","Sprite"],["Label","Label"],["Path","Path"]]}],message2:"ID is %1",args2:[{type:"field_input",name:"ID",check:"String",text:`Sprite_${Math.random().toString().slice(2,7)}`}],colour:o,nextStatement:"Statement"})}},s.JavaScript.signal_new_sprite_as_receiver=function(t){return""},s.Blocks.signal_when_receiver_is={init(){this.jsonInit({message0:"On signals %1 🚩",args0:[{type:"field_dropdown",name:"SIG",options:r}],message1:"when receiver is %1",args1:[{type:"field_dropdown",name:"ID",options:l}],colour:o,nextStatement:"Statement"})}},s.JavaScript.signal_when_receiver_is=function(){return""},s.Blocks.signal_send={init(){this.jsonInit({message0:"%1 send signal %2 🚩",args0:[{type:"field_dropdown",name:"TARGET",options:[["receiver","receiver"],["sender","sender"]]},{type:"field_input",name:"NAME",text:"MY_SIGNAL",check:"String"}],colour:o,previousStatement:"Statement",nextStatement:"Statement"})}},s.JavaScript.signal_send=function(t){const e=t.getFieldValue("TARGET");return`utils.Signal.send('${t.getFieldValue("NAME")}', {sender:${e}});\n`};const c=n(0),p=c.Msg.SPRITE_HUE,_={type:"field_dropdown",name:"SPRITE",options:()=>{const t=a.get("Sprites");return[["receiver","receiver"],["sender","sender"]].concat(t.map(t=>[t,t]))}};function u(){const t=this.getParent();let e=t,n=!1;for(;e;){if("sprite_each_elements_named"===e.type){n=!0;break}e=e.getParent()}t&&!n&&(console.error(`Block '${this.type}' must be placed inside the Block 'sprite_each_elements_named'.`),this.unplug(!0))}c.Blocks.sprite_append_to={init(){this.jsonInit({message0:"append %1 to %2",args0:[_,{type:"field_dropdown",name:"LAYER",options:[["fglayer","fglayer"],["bglayer","bglayer"]]}],colour:p,previousStatement:"Statement",nextStatement:"Statement"})}},c.JavaScript.sprite_append_to=function(t){let e=t.getFieldValue("SPRITE");const n=t.getFieldValue("LAYER");return"sender"!==e&&"receiver"!==e&&(e=`utils.ElementList.getElementById('${e}')`),`scene.layer('${n}').append(${e});\n`},c.Blocks.sprite_attrs={init(){this.jsonInit({message0:"set %1 attrs",args0:[_],message1:"%1",args1:[{type:"input_statement",name:"ATTRS",check:"KeyValue"}],colour:p,previousStatement:"Statement",nextStatement:"Statement"})}},c.JavaScript.sprite_attrs=function(t){let e=t.getFieldValue("SPRITE");const n=c.JavaScript.statementToCode(t,"ATTRS");return"sender"!==e&&"receiver"!==e&&(e=`utils.ElementList.getElementById('${e}')`),`${e}.attr(utils.parse_attr({${n}\n}));\n`},c.Blocks.sprite_create_attrs={init(){this.jsonInit({message0:"create %1",args0:[{type:"field_dropdown",name:"TYPE",options:[["Sprite","Sprite"],["Label","Label"],["Path","Path"]]}],message1:"named %1 attrs",args1:[{type:"field_input",name:"NAME",text:"MyName",check:"String"}],message2:"%1",args2:[{type:"input_statement",name:"ATTRS",check:"KeyValue"}],colour:p,previousStatement:"Statement",nextStatement:"Statement"})}},c.JavaScript.sprite_create_attrs=function(t){return`utils.ElementList.add(spritejs.createElement('${t.getFieldValue("TYPE")}', utils.parse_attr({name: '${t.getFieldValue("NAME")}'}, {${c.JavaScript.statementToCode(t,"ATTRS")}\n})));\n`},c.Blocks.sprite_each_elements_named={init(){this.jsonInit({message0:"each elements named %1",args0:[{type:"field_dropdown",name:"NAME",options:()=>{const t=a.get("SpriteNames");return t.length>0?t.map(t=>[t,t]):[["",""]]}}],message1:"do %1",args1:[{type:"input_statement",name:"DO",check:"Statement"}],colour:p,previousStatement:"Statement",nextStatement:"Statement"})}},c.JavaScript.sprite_each_elements_named=function(t){return`await Promise.all(utils.ElementList.getElementsByName('${t.getFieldValue("NAME")}').map(async (item, index) => {\n${c.JavaScript.statementToCode(t,"DO")}\n}));\n`},c.Blocks.sprite_each_item_attrs={init(){this.jsonInit({message0:"set item attrs",message1:"%1",args1:[{type:"input_statement",name:"ATTRS",check:"KeyValue"}],colour:p-15,previousStatement:"Statement",nextStatement:"Statement"})},onchange:u},c.JavaScript.sprite_each_item_attrs=function(t){return`item.attr(utils.parse_attr({${c.JavaScript.statementToCode(t,"ATTRS")}\n}));\n`},c.Blocks.sprite_item_append_to={init(){this.jsonInit({message0:"append item to %1",args0:[{type:"field_dropdown",name:"LAYER",options:[["fglayer","fglayer"],["bglayer","bglayer"]]}],colour:p-15,previousStatement:"Statement",nextStatement:"Statement"})},onchange:u},c.JavaScript.sprite_item_append_to=function(t){return`scene.layer('${t.getFieldValue("LAYER")}').append(item);\n`},c.Blocks.sprite_item_get_index={init(){this.jsonInit({message0:"index",colour:p-15,output:"Number"})}},c.JavaScript.sprite_item_get_index=function(t){return["index",c.JavaScript.ORDER_NONE]},c.Blocks.sprite_animate={init(){this.jsonInit({message0:"%1 %2 animate %3 ms",args0:[{type:"field_dropdown",name:"ASYNC?",options:[["⚡️","-"],["⌛️","await"]]},_,{type:"input_value",name:"DURATION",check:"Number"}],message1:"from %1",args1:[{type:"input_statement",name:"FROM_ATTRS",check:"KeyValue"}],message2:"to %1",args2:[{type:"input_statement",name:"TO_ATTRS",check:"KeyValue"}],message3:"easing %1",args3:[{type:"input_value",name:"EASING",check:"String"}],colour:p,previousStatement:"Statement",nextStatement:"Statement"})}},c.JavaScript.sprite_animate=function(t){const e="await"===t.getFieldValue("ASYNC?"),n=t.getFieldValue("SPRITE"),i=c.JavaScript.valueToCode(t,"DURATION",c.JavaScript.ORDER_NONE)||600,a=c.JavaScript.valueToCode(t,"EASING",c.JavaScript.ORDER_NONE)||'"ease"';let s=`${n}.animate([{${c.JavaScript.statementToCode(t,"FROM_ATTRS")}}, {${c.JavaScript.statementToCode(t,"TO_ATTRS")}}], {duration: ${i}, fill: 'forwards', easing: ${a}})`;return e&&(s=`if(!${n}.layer){console.error('${n} must append to layer before animated!');} await ${s}.finished`),`${s};\n`},c.Blocks.sprite_item_animate={init(){this.jsonInit({message0:"%1 item animate %2 ms",args0:[{type:"field_dropdown",name:"ASYNC?",options:[["⚡️","-"],["⌛️","await"]]},{type:"input_value",name:"DURATION",check:"Number"}],message1:"from %1",args1:[{type:"input_statement",name:"FROM_ATTRS",check:"KeyValue"}],message2:"to %1",args2:[{type:"input_statement",name:"TO_ATTRS",check:"KeyValue"}],message3:"easing %1",args3:[{type:"input_value",name:"EASING",check:"String"}],colour:p-15,previousStatement:"Statement",nextStatement:"Statement"})},onchange:u},c.JavaScript.sprite_item_animate=function(t){const e="await"===t.getFieldValue("ASYNC?"),n=c.JavaScript.valueToCode(t,"DURATION",c.JavaScript.ORDER_NONE)||600,i=c.JavaScript.valueToCode(t,"EASING",c.JavaScript.ORDER_NONE)||'"ease"';let a=`item.animate([{${c.JavaScript.statementToCode(t,"FROM_ATTRS")}}, {${c.JavaScript.statementToCode(t,"TO_ATTRS")}}], {duration: ${n}, fill: 'forwards', easing: ${i}})`;return e&&(a=`if(!item.layer){console.error('item must append to layer before animated!');} await ${a}.finished`),`${a};\n`};n(6);n.d(e,"Blockly",function(){return m}),n.d(e,"initWorkspace",function(){return S}),n.d(e,"Dropdown",function(){return a});const m=n(0);function S(t,e){return m.inject(t,e)}m.BlockSvg.START_HAT=!0,m.Field.prototype.maxDisplayLength=20}]);