module.exports=function(e){var t={};function o(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/js/",o(o.s=12)}({12:function(e,t,o){"use strict";o.r(t);const r=new Map;var n={DEFAULT_RECEIVER:{id:Symbol("default_receiver")},on(e,t){const o=r.get(e)||[];o.push(t),r.set(e,o)},un(e,t){const o=r.get(e);if(o){const e=o.indexOf(t);e>=0&&o.splice(e,1)}},send(e,t,o={}){(r.get(e)||[]).forEach(e=>{e(t,o)})},get signals(){return[...r.keys()]}};const l=new Set,a={};var s={add:e=>(l.add(e),e.id&&(a[e.id]=e),n.send("ELEMENT_CREATED",e),e),remove(e){e.layer&&e.remove(),n.send("ELEMENT_DESTROYED",e),e.id&&delete a[e.id],e.$$deleted=!0,l.delete(e)},all:()=>[...l],getElementById:e=>a[e]||null,getElementsByName:e=>[...l].filter(t=>t.name===e)};function u(e,t,o=0){const r=`${t}X`,n=`${t}Y`;(r in e||n in e)&&(e[t]=[null!=e[r]?e[r]:o,null!=e[n]?e[n]:o],delete e[r],delete e[n])}const i=Symbol("frameTimer"),d=Symbol("cursor"),c=Symbol("dragHandlers"),f=Symbol("originalZIndex");var y=function(...e){const t={};return e.forEach(e=>{t[e]=Symbol(e)}),t}("target","offsetX","offsetY","layerX","layerY","altKey","ctrlKey","shiftKey","buttons","key","keyCode","property","oldValue","newValue");const m=new Map;var g={set(e,t,o=null){const r=m.get(e);m.set(e,t),n.send("STORE_PROPERTY_UPDATE",o,{[y.property]:e,[y.oldValue]:r,[y.newValue]:t})},get:e=>m.get(e),delete(e,t=null){const o=m.get(e);m.delete(e),n.send("STORE_PROPERTY_UPDATE",t,{[y.property]:e,[y.oldValue]:o})}};const b=new Map,p=new Audio;var h={canplay:e=>p.canPlayType(e),load(e){"string"==typeof e&&(e={id:e,src:e});let t=b.get(e.id);if(t)return t;const o=new Audio(e.src);return t=new Promise(e=>{o.oncanplaythrough=(()=>{e(o)})}),b.set(e.id,t),t},play(e){this.load(e).then(e=>e.play())}};function E(e,t,o){const r=o.originalEvent||o,{altKey:l,buttons:a,ctrlKey:s,shiftKey:u,key:i,keyCode:d}=r,c={[y.target]:r.target,[y.altKey]:l,[y.ctrlKey]:s,[y.shiftKey]:u};null!=i&&Object.assign(c,{[y.key]:i,[y.keyCode]:d}),null!=a&&Object.assign(c,{[y.buttons]:a}),o.originalEvent&&null!=r.offsetX&&Object.assign(c,{[y.offsetX]:r.offsetX,[y.offsetY]:r.offsetY,[y.layerX]:r.layerX,[y.layerY]:r.layerY}),n.send(e,t,c)}o.d(t,"runtime",function(){return v});const v={Signal:n,Symbols:y,use:function({Scene:e},t={container:"#stage",viewport:"auto",resolution:"flex"}){const{container:o,viewport:r,resolution:l}=t,a=new e(o,{viewport:r,resolution:l});return a.layer("bglayer",{handleEvent:!1}),a.layer("fglayer").on("click",e=>{E("LAYER_CLICKED",a,e)}),document.addEventListener("keydown",e=>{n.send("KEYDOWN",document,e)}),document.addEventListener("keyup",e=>{n.send("KEYUP",document,e)}),this.scene=a,a},dispatchEvent:E,parse_attr:function(e,...t){const o=t.reduce((e,t)=>Object.assign(e,t),{});if("texture"in o&&(o.textures=[o.texture],delete o.texture),"fontFamily"in o&&(o.fontFamily=`"${o.fontFamily}"`),u(o,"anchor",0),u(o,"scale",1),u(o,"translate",0),u(o,"skew",0),function(e){if("borderWidth"in e||"borderStyle"in e||"borderColor"in e){const{borderWidth:t,borderStyle:o,borderColor:r}=e;e.border={width:null!=t?t:1,style:null!=o?o:"solid",color:null!=r?r:"#000000"},delete e.borderWidth,delete e.borderStyle,delete e.borderColor}}(o),"draggable"in o){const t=e[c];if(!o.draggable&&t){const[o,r,n]=t;e.off(["mousedown","touchstart"],o),e.off(["mouseup","touchend"],n),e.off(["mousemove","touchmove"],r)}else if(o.draggable&&!t){let t=0,o=0;const r=r=>{const{layerX:n,layerY:l}=r;e.attr({x:n-t,y:l-o})},n=n=>{t=n.offsetX,o=n.offsetY,e[f]=e.attr("zIndex"),e.setMouseCapture(),e.attr({shadow:{color:"#333",blur:5,offset:[10,10]},zIndex:1/0}),e.on(["mousemove","touchmove"],r)},l=t=>{e.releaseMouseCapture(),e.attr({shadow:null,zIndex:e[f]}),e.off(["mousemove","touchmove"],r)};e[c]=[n,l,r],e.on(["mousedown","touchstart"],n),e.on(["mouseup","touchend"],l)}"cursor"in o||(o.cursor=o.draggable?"move":"default")}"cursor"in o&&null==e[d]&&(e[d]="auto",e.on("mouseenter",t=>{e[d]=t.originalEvent.target.style.cursor;const o=e.attr("cursor");t.originalEvent.target.style.cursor=o}),e.on("mouseleave",t=>{t.originalEvent.target.style.cursor=e[d]}));const r=Object.entries(o).filter(([e,t])=>0===e.indexOf("textureFrame$")&&(delete o[e],!0)).map(e=>e[1]),n=r.length;if(n>0&&!e.$$deleted){let t=0;const o=e[i];o&&clearTimeout(o),e.attr({textures:r[t][0]}),e[i]=setTimeout(function o(){e.attr({textures:r[t][0]}),e.$$deleted||(e[i]=setTimeout(o,1e3*r[t][1])),t=(t+1)%n},1e3*r[t][1]),t=(t+1)%n}return o},get_attr:function(e,t){if("sprite"===e.nodeType||"path"===e.nodeType||"label"===e.nodeType)return/^.*[XY]$/.test(t)?function(e,t){const o=t.slice(-1),r=e.attr(t.slice(0,-1));return"X"===o?r[0]:r[1]}(e,t):"borderWidth"===t?e.attr("border").width:"bordeStyle"===t?e.attr("border").style:"borderColor"===t?e.attr("border").color:e.attr(t)},wait:function(e){return new Promise(t=>{setTimeout(t,e)})},random:function(e,t){return e<t&&([e,t]=[t,e]),Math.floor(Math.random()*(t-e))+e},random_color:function(){return`rgb(${Math.floor(255*Math.random())},${Math.floor(255*Math.random())},${Math.floor(255*Math.random())})`},random_color_hue:function(e,t,o){return`hsla(${Math.floor(360*Math.random())},${e}%,${t}%,${o})`},getCollisions:function(e){const t=e.layer;return t?t.children.filter(t=>t!==e&&t.OBBCollision(e)):[]},ElementList:s,Store:g,Audio:h}}});